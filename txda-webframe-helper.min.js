var txdaWebframeHelper=(()=>{var o=Object.defineProperty;var u=s=>o(s,"__esModule",{value:!0});var c=(s,t)=>{u(s);for(var e in t)o(s,e,{get:t[e],enumerable:!0})};var p={};c(p,{initialize:()=>m});var d=(s,t)=>{t._message&&s.addEventListener("message",e=>{t._message?.(e)}),t.onConnected&&s.addEventListener("message",e=>{e.data?.messageType==="txdaConnectionAcknowledgement"&&t.onConnected?.(e.data?.metaData)}),t.onUpdateCurrentDesign&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesign"){let{metaData:a,data:i}=e.data;t.onUpdateCurrentDesign?.(i,a)}}),t.onUpdateCurrentDesign3d&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesign3d"){let{metaData:a,data:i}=e.data;t.onUpdateCurrentDesign3d?.(i,a)}}),t.onUpdateCurrentDesignData&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesignData"){let{metaData:a,data:i}=e.data;t.onUpdateCurrentDesignData?.(i,a)}})};var m=(s,t={})=>new Promise((e,a)=>{let i=new URL(s).origin;if(i==="*"){a("Specific target origins must be specified to connect to TXDA installs");return}let D=r=>{if(r.data?.messageType==="txdaMessagePortTransfer"){if(r.origin!==i){a("Attempted TXDA connection event from unauthorized origin");return}if(r.source!==window.parent){a("Attempted TXDA connection event from unauthorized source");return}let n=r.ports[0];d(n,t),n.start(),n.postMessage({messageType:"txdaRequestCurrentDesign"}),e({_port:n,requestCurrentDesign:()=>n.postMessage({messageType:"txdaRequestCurrentDesign"}),requestCurrentDesign3d:()=>n.postMessage({messageType:"txdaRequestCurrentDesign3d"}),requestCurrentDesignData:()=>n.postMessage({messageType:"txdaRequestCurrentDesignData"}),addCurrentDesignData:g=>n.postMessage({messageType:"txdaAddCurrentDesignData",data:g}),addCurrentStructureData:g=>n.postMessage({messageType:"txdaAddCurrentStructureData",data:g}),disconnect:()=>{n.close(),t.onDisconnected?.()}})}};window.addEventListener("message",D,{once:!0}),window.parent.postMessage({messageType:"txdaConnectionRequest",windowName:window.name},i),setTimeout(()=>{a("Connection to TXDA failed (timed out)")},1e4)});return p;})();
//# sourceMappingURL=txda-webframe-helper.min.js.map
